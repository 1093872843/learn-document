# react

本文主要讲述一下常用的功能和语法，详情请查阅[react 官方文档](https://zh-hans.react.dev/learn)

React 从诞生之初就是可被渐进式使用的，渐进式（Progressive）的意思是框架或库可以逐步引入到项目中，根据需要选择使用部分功能，而不是一开始就要求全盘接管整个项目。

## jsx 标签语法

```jsx
function MyButton() {
  return <button>I'm a button</button>;
}

export default function MyApp() {
  // JSX 比 HTML 更加严格。你必须闭合标签，如 `<br />`。你的组件也不能返回多个 JSX 标签。你必须将它们包裹到一个共享的父级中，比如 `<div>...</div>` 或使用空的` <>...</>` 包裹：
  return (
    <div>
      <h1>Welcome to my app</h1>
      <MyButton />
    </div>
  );
}
```

## 显示数据

jsx 语法中使用`{}`会将其内的代码作为 js 处理。

```jsx
return <h1>{user.name}</h1>;

return <img className="avatar" src={user.imageUrl} />;
```

## 条件语法

React 没有特殊的语法来编写条件语句，因此你使用的就是普通的 JavaScript 代码。例如使用 if 语句根据条件引入 JSX：

```jsx
let content;
if (isLoggedIn) {
  content = <AdminPanel />;
} else {
  content = <LoginForm />;
}
return <div>{content}</div>;
```

```jsx
<div>{isLoggedIn ? <AdminPanel /> : <LoginForm />}</div>
```

## 循环语法

```jsx
const listItems = products.map((product) => (
  <li key={product.id}>{product.title}</li>
));

return <ul>{listItems}</ul>;
```

注意，`<li>` 有一个 key 属性。对于列表中的每一个元素，你都应该传递一个字符串或者数字给 key，用于在其兄弟节点中唯一标识该元素。通常 key 来自你的数据，比如数据库中的 ID。如果你在后续插入、删除或重新排序这些项目，React 将依靠你提供的 key 来思考发生了什么。

## 事件处理

```jsx
function MyButton() {
  function handleClick() {
    alert("You clicked me!");
  }

  return <button onClick={handleClick}>Click me</button>;
}
```

## 更新页面（相当于 Vue 中的数据绑定）

通常你会希望你的组件 “记住” 一些信息并展示出来，比如一个按钮被点击的次数。要做到这一点，你需要在你的组件中添加 state。

```jsx
import { useState } from "react";

function MyButton() {
  //你将从 useState 中获得两样东西：当前的 state（count），以及用于更新它的函数（setCount）。你可以给它们起任何名字，但按照惯例会像 [something, setSomething] 这样为它们命名。
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount(count + 1);
  }

  return <button onClick={handleClick}>Clicked {count} times</button>;
}
```

当我们我们引用了多个`MyButton`，每个组件中的`state`是相互独立，互不影响的。

当我们修改数组或者对象时，通常有两种方式，创建新旧副本替换数据引用和直接修改数据的值。react 建议使用第一种方式来保证原数据的不变性。这是因为当父组件的 state 发生变化时，所有子组件都会自动重新渲染，但是出于性能原因，我们希望只更改数据变化影响的组件，而跳过不被这些变化数据影响的组件，不变性使得组件比较其数据是否已更改的成本非常低。

## 父子组件数据传递(prop)，组件数据共享

在[更新页面](#更新页面相当于-vue-中的数据绑定)中，每个`state`是相互独立互不影响的，但是有时我们需要数据共享，则需要将各个按钮的 state “向上” 移动到最接近包含所有按钮的组件之中。

且规范上需要共享的数据不应该在子组件中更新。

当父组件的 state 发生变化时，所有子组件都会自动重新渲染。

```jsx
export default function MyApp() {
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount(count + 1);
  }

  return (
    <div>
      <h1>Counters that update separately</h1>
      <MyButton count={count} onClick={handleClick} />
      <MyButton count={count} onClick={handleClick} />
    </div>
  );
}

function MyButton({ count, onClick }) {
  return <button onClick={onClick}>Clicked {count} times</button>;
}
```

使用这种方式传递的信息被称作 prop。此时 MyApp 组件包含了 count state 以及 handleClick 事件处理函数，并将它们作为 prop 传递给 了每个按钮。

## Hook

以 use 开头的函数被称为 Hook。useState 是 React 提供的一个内置 Hook。你可以在 [React API 参考](https://zh-hans.react.dev/reference/react) 中找到其他内置的 Hook。你也可以通过组合现有的 Hook 来编写属于你自己的 Hook。

Hook 比普通函数更为严格。你只能在你的组件（或其他 Hook）的 顶层 调用 Hook。如果你想在一个条件或循环中使用 useState，请提取一个新的组件并在组件内部使用它。

## 创建项目

react 支持多种[生产级开发框架](https://zh-hans.react.dev/learn/start-a-new-react-project#production-grade-react-frameworks)

这里使用 vite + react 快速搭建小型应用。

```
npm create vite@latest start-react

npm install
```
